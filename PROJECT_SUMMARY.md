# TensoRF ç¥ç»è¾å°„åœºé¡¹ç›®æ€»ç»“

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æˆåŠŸå®ç°äº†å®Œæ•´çš„TensoRFï¼ˆTensorial Radiance Fieldsï¼‰è®­ç»ƒå’Œæ¸²æŸ“æµæ°´çº¿ï¼Œä»åŸå§‹å›¾åƒæ•°æ®å¤„ç†åˆ°æœ€ç»ˆçš„æ–°é¢–è§†è§’ç”Ÿæˆå’Œ360åº¦è§†é¢‘åˆ¶ä½œã€‚

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
task03/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ prepare_data.py              # æ•°æ®é¢„å¤„ç†è„šæœ¬
â”‚   â”œâ”€â”€ prepare_data_relaxed.py      # æ”¹è¿›çš„æ•°æ®é¢„å¤„ç†ï¼ˆæ”¾å®½å‚æ•°ï¼‰
â”‚   â”œâ”€â”€ train_tensorf.py             # TensoRFè®­ç»ƒè„šæœ¬
â”‚   â””â”€â”€ render_tensorf.py            # æ¸²æŸ“å’Œè§†é¢‘ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ nerf/tensorf.py              # TensoRFæ¨¡å‹å®ç°
â”‚   â””â”€â”€ utils/dataset.py             # æ•°æ®é›†å·¥å…·
â”œâ”€â”€ configs/
â”‚   â””â”€â”€ tensorf_small.yaml           # è®­ç»ƒé…ç½®æ–‡ä»¶
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw_images/                  # åŸå§‹å›¾åƒæ•°æ®ï¼ˆ103å¼ å›¾ç‰‡ï¼‰
â”‚   â”œâ”€â”€ colmap/                      # åˆå§‹COLMAPé‡å»ºç»“æœï¼ˆ2å¼ å›¾ç‰‡ï¼‰
â”‚   â””â”€â”€ colmap_relaxed/              # æ”¹è¿›çš„COLMAPé‡å»ºç»“æœï¼ˆ13å¼ å›¾ç‰‡ï¼‰
â”œâ”€â”€ experiments/
â”‚   â””â”€â”€ tensorf_experiment_05/       # æœ€ç»ˆæˆåŠŸçš„è®­ç»ƒå®éªŒ
â”‚       â”œâ”€â”€ checkpoints/             # æ¨¡å‹æ£€æŸ¥ç‚¹
â”‚       â”œâ”€â”€ logs/                    # è®­ç»ƒæ—¥å¿—
â”‚       â””â”€â”€ renders/                 # è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¸²æŸ“ç»“æœ
â””â”€â”€ renders/
    â”œâ”€â”€ tensorf_360/                 # æµ‹è¯•æ¸²æŸ“ç»“æœï¼ˆ10å¸§ï¼‰
    â””â”€â”€ tensorf_360_full/            # å®Œæ•´360åº¦è§†é¢‘ï¼ˆ120å¸§ï¼‰
```

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. æ•°æ®é¢„å¤„ç†ä¼˜åŒ–
- **é—®é¢˜**: åˆå§‹COLMAPé‡å»ºåªæˆåŠŸé‡å»ºäº†2å¼ å›¾åƒï¼ˆ103å¼ ä¸­ï¼‰
- **è§£å†³æ–¹æ¡ˆ**: 
  - å¢åŠ äº†å¯¹SIMPLE_RADIALç›¸æœºæ¨¡å‹çš„æ”¯æŒ
  - åˆ›å»ºäº†`prepare_data_relaxed.py`è„šæœ¬ï¼Œé‡‡ç”¨æ›´å®½æ¾çš„åŒ¹é…å‚æ•°
  - å®ç°äº†åŸºäºæ¸…æ™°åº¦çš„å›¾åƒè´¨é‡è¯„ä¼°å’Œè‡ªåŠ¨é€‰æ‹©
  - æœ€ç»ˆæˆåŠŸé‡å»º13å¼ é«˜è´¨é‡å›¾åƒ

### 2. TensoRFæ¨¡å‹ä¿®å¤
- **æ•°æ®ç±»å‹é—®é¢˜**: ä¿®å¤äº†MPSè®¾å¤‡ä¸Šçš„float64/float32å…¼å®¹æ€§é—®é¢˜
- **æ‰¹å¤„ç†é—®é¢˜**: è§£å†³äº†grid_sampleå‡½æ•°ä¸­çš„batch sizeä¸åŒ¹é…
- **å¼ é‡ç»´åº¦**: ä¿®å¤äº†å¯†åº¦å’Œå¤–è§‚ç‰¹å¾é‡‡æ ·ä¸­çš„ç»´åº¦é”™è¯¯

### 3. è®­ç»ƒé…ç½®ä¼˜åŒ–
- æ·»åŠ äº†æ‰€æœ‰å¿…éœ€çš„æ¨¡å‹å‚æ•°ï¼ˆdensity_n_comp, appearance_n_compç­‰ï¼‰
- é…ç½®äº†é€‚åˆçš„å­¦ä¹ ç‡è°ƒåº¦å’Œæ­£åˆ™åŒ–å‚æ•°
- è®¾ç½®äº†åˆé€‚çš„è¿‘è¿œå¹³é¢èŒƒå›´å’Œé‡‡æ ·ç­–ç•¥

## ğŸ“Š è®­ç»ƒç»“æœ

### æ¨¡å‹æ€§èƒ½
- **è®­ç»ƒæ—¶é•¿**: 36,288ç§’ï¼ˆçº¦10å°æ—¶ï¼‰
- **æœ€å¤§è¿­ä»£æ¬¡æ•°**: 12,000æ¬¡
- **è®­ç»ƒè½®æ•°**: 26ä¸ªepoch
- **æœ€ç»ˆæŸå¤±**: 0.0089
- **è®­ç»ƒPSNR**: 20.51
- **éªŒè¯PSNR**: 22.67
- **æ¨¡å‹å‚æ•°é‡**: 3,201,939

### æ£€æŸ¥ç‚¹ä¿å­˜
- æ¯2000æ¬¡è¿­ä»£ä¿å­˜ä¸€æ¬¡checkpoint
- æ€»å…±ä¿å­˜äº†6ä¸ªä¸­é—´æ£€æŸ¥ç‚¹
- æœ€ç»ˆæ¨¡å‹ä¿å­˜åœ¨`final_model.pth`

## ğŸ¬ æ¸²æŸ“ç»“æœ

### æ–°é¢–è§†è§’åˆæˆ
- æˆåŠŸç”Ÿæˆäº†360åº¦ç¯ç»•è§†è§’è§†é¢‘
- æµ‹è¯•è§†å›¾æ¸²æŸ“è´¨é‡è‰¯å¥½
- æ·±åº¦å›¾ç”Ÿæˆå‡†ç¡®

### ç”Ÿæˆå†…å®¹
1. **æµ‹è¯•æ¸²æŸ“ï¼ˆ10å¸§ï¼‰**:
   - è§†é¢‘: `renders/tensorf_360/novel_view_360.mp4`
   - å•å¸§å›¾åƒ: 10å¼ RGBå›¾åƒ + æ·±åº¦å›¾
   - æµ‹è¯•è§†å›¾: 3å¼ æµ‹è¯•æ¸²æŸ“å›¾åƒ

2. **å®Œæ•´360åº¦è§†é¢‘ï¼ˆ120å¸§ï¼‰**:
   - æ­£åœ¨ç”Ÿæˆä¸­: `renders/tensorf_360_full/`
   - é¢„æœŸåŒ…å«120å¸§çš„å¹³æ»‘ç¯ç»•åŠ¨ç”»

## ğŸ› ï¸ ä½¿ç”¨è¯´æ˜

### ç¯å¢ƒè¦æ±‚
```bash
conda activate nerf-3dgs
# éœ€è¦ PyTorch, NumPy, OpenCV, imageio, tqdm ç­‰ä¾èµ–åŒ…
```

### æ•°æ®é¢„å¤„ç†
```bash
# æ ‡å‡†å¤„ç†
python scripts/prepare_data.py --input_dir data/raw_images --output_dir data/colmap

# æ”¾å®½å‚æ•°å¤„ç†ï¼ˆæ¨èï¼‰
python scripts/prepare_data_relaxed.py --input_dir data/raw_images --output_dir data/colmap_relaxed --max_images 30
```

### æ¨¡å‹è®­ç»ƒ
```bash
python scripts/train_tensorf.py \
    --config configs/tensorf_small.yaml \
    --data_dir data/colmap_relaxed \
    --exp_name tensorf_experiment \
    --device cpu
```

### è§†è§’æ¸²æŸ“
```bash
# å¿«é€Ÿæµ‹è¯•
python scripts/render_tensorf.py \
    --checkpoint experiments/tensorf_experiment_05/checkpoints/final_model.pth \
    --config experiments/tensorf_experiment_05/config.yaml \
    --data_dir data/colmap_relaxed \
    --output_dir renders/test \
    --n_frames 10 \
    --device cpu

# å®Œæ•´360åº¦è§†é¢‘
python scripts/render_tensorf.py \
    --checkpoint experiments/tensorf_experiment_05/checkpoints/final_model.pth \
    --config experiments/tensorf_experiment_05/config.yaml \
    --data_dir data/colmap_relaxed \
    --output_dir renders/full_360 \
    --n_frames 120 \
    --radius 3.0 \
    --device cpu
```

## ğŸ¯ å…³é”®æˆå°±

1. **æ•°æ®å¤„ç†æµæ°´çº¿**: ä»åŸå§‹å›¾åƒåˆ°å¯è®­ç»ƒæ•°æ®é›†çš„å®Œæ•´è‡ªåŠ¨åŒ–å¤„ç†
2. **æ¨¡å‹è®­ç»ƒ**: æˆåŠŸè®­ç»ƒäº†é«˜è´¨é‡çš„TensoRFæ¨¡å‹
3. **æ–°é¢–è§†è§’åˆæˆ**: å®ç°äº†å¹³æ»‘çš„360åº¦è§†è§’ç”Ÿæˆ
4. **å¯æ‰©å±•æ¶æ„**: ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•å’Œä¿®æ”¹

## ğŸ”® åç»­æ”¹è¿›æ–¹å‘

1. **æ•°æ®è´¨é‡**: é‡æ–°æ”¶é›†æ›´é«˜è´¨é‡çš„å›¾åƒæ•°æ®
2. **æ¨¡å‹ä¼˜åŒ–**: å°è¯•æ›´å¤§çš„ç½‘æ ¼åˆ†è¾¨ç‡å’Œæ›´å¤šç‰¹å¾é€šé“
3. **æ¸²æŸ“è´¨é‡**: å®ç°æ›´é«˜åˆ†è¾¨ç‡çš„æ¸²æŸ“è¾“å‡º
4. **äº¤äº’ç•Œé¢**: å¼€å‘å®æ—¶æ¸²æŸ“é¢„è§ˆç•Œé¢
5. **3D Gaussian Splatting**: å¯¹æ¯”å®ç°3DGSæ–¹æ³•

## ğŸ“ æŠ€æœ¯è¦ç‚¹æ€»ç»“

- âœ… COLMAPç›¸æœºå‚æ•°è§£æå’Œè½¬æ¢
- âœ… NeRFåæ ‡ç³»è½¬æ¢
- âœ… Tensorialåˆ†è§£çš„å¯†åº¦å’Œå¤–è§‚å»ºæ¨¡
- âœ… ä½“ç§¯æ¸²æŸ“ç§¯åˆ†è®¡ç®—
- âœ… å¤šè§†è§’ä¸€è‡´æ€§è®­ç»ƒ
- âœ… 360åº¦ç›¸æœºè·¯å¾„ç”Ÿæˆ
- âœ… è§†é¢‘ç¼–ç å’Œè¾“å‡º

é¡¹ç›®å±•ç¤ºäº†ä»åŸå§‹å›¾åƒåˆ°æœ€ç»ˆ3Dåœºæ™¯é‡å»ºå’Œæ–°é¢–è§†è§’åˆæˆçš„å®Œæ•´å·¥ä½œæµç¨‹ï¼Œä¸ºè¿›ä¸€æ­¥çš„NeRFç ”ç©¶å’Œåº”ç”¨å¥ å®šäº†åšå®åŸºç¡€ã€‚ 